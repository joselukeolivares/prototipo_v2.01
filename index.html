<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title> Demo 1 </title>
		<link rel="style" href="Scratcher.css">
		<link rel="stylesheet" href="CSS/balloon.css">



		<script src="js/pixi.min.js"></script>
		<style>
		.Scratcher_div{
		  position: absolute;
			top:0; left:0;
			width: 100%; height: 100%;
			background: url(assets/ui/scratch.png);
			background-size: 200% 2000%;
			display: none;

			z-index: 200;

		}

		.circulos{
			border-radius: 40px;
			background-color: white;
			width: 30px;
			height: 30px;
			align-self: center;
			display: inline-block;
			margin: 30px 10px 10px 10px;
			border-color: white;
		}
		</style>

	</head>
	<body>
	<script>
 for(var i=0;i<7;i++)
 	console.log("Es mejor imprimir en un ciclo 7 veces!");
	var width = screen.width-100;
    var height = screen.height-220;

	var app = new PIXI.Application(width,height,{transparent:true});
	app.view.style.width = width;
	app.view.style.height = height;
    document.body.appendChild(app.view);

	var anim;

	var textureShop_1 = PIXI.Texture.fromImage('assets/tienda_1_1.png');

	var shop = new PIXI.Sprite(textureShop_1);

	        shop.x = app.screen.width / 2;
            shop.y = (app.screen.height / 2);
            shop.anchor.set(0.5,0.5);

	shop.interactive = true;
	shop.buttonMode = true;

		PIXI.loader
		    .add('assets/tiendas.json')
			.load(onAssetsLoaded);

			function onAssetsLoaded(){
			var frames = [];
			for(var i=1;i<=8;i++){
			var val = i;
			frames.push(PIXI.Texture.fromFrame("tienda0"+val+".png"));
			}
			var anim = new PIXI.extras.AnimatedSprite(frames);

			anim.x = app.screen.width / 2;
            anim.y = app.screen.height / 2;
            anim.anchor.set(0.5);
			anim.animationSpeed = 0.2;
		}
		shop
	    .on('mouseover',onmouseOver)
		.on('mouseout',onmouseOut)
		.on('click',Click);

		//scratcher(document.body);

		app.stage.addChild(shop);

		function onmouseOver(){

                     onAssetsLoaded();

			function onAssetsLoaded(){

			var frames = [];

			for(var i=1;i<=8;i++){
			var val = i;

			frames.push(PIXI.Texture.fromFrame("tienda0"+val+".png"));

			}
			anim = new PIXI.extras.AnimatedSprite(frames);

			anim.x = app.screen.width / 2;
            anim.y = app.screen.height / 2;
            anim.anchor.set(0.5);
			anim.animationSpeed = 0.2;
            anim.play();

           app.stage.addChild(anim);

			setTimeout(function(){detener()},600);

			function detener(){
			anim.stop();
			}
		   }
		}
		function onmouseOut(){

                   onAssetsLoaded();

			function onAssetsLoaded(){

			var frames = [];

			for(var i=8;i>=1;i--){
			var val = i;

			frames.push(PIXI.Texture.fromFrame("tienda0"+val+".png"));

			}
		   var anim = new PIXI.extras.AnimatedSprite(frames);

			 anim.x = app.screen.width/2;
			 anim.y = app.screen.height/2;
			 anim.anchor.set(0.5);
			 anim.animationSpeed = 0.2;
			 anim.play();

			 app.stage.addChild(anim);

			 setTimeout(function(){detener()},600);

			 function detener(){

			 anim.stop();
			 }
			}
		}

		function Click(){

		//app.stage.removeChild(anim);
		//app.stage.removeChild(shop);
		//while(app.stage.children[0]) { app.stage.removeChild(app.stage.children[0]); }
		//walking();
		scratching(1)
			.then(print)
			.then(walking)
			.then(secondS(2))
			//.then(print);


		}
	</script>
	<script>
			     //app = new PIXI.Application(1302,615);
				//document.body.appendChild(app.view);
	function walking(){
				var background = PIXI.Texture.fromImage("assets/tienda_dentro.png");
				var textureButton = PIXI.Texture.fromImage("assets/boton_animado_2_2.png");
				var textureButton2 = PIXI.Texture.fromImage("assets/bottom_animado_1_1.png");

				var tienda_dentro = new PIXI.Sprite(background);
				var botton = new PIXI.Sprite(textureButton);


				tienda_dentro.x = app.screen.width / 2;
                tienda_dentro.y = app.screen.height / 2;
                tienda_dentro.anchor.set(0.5,0.5);

				botton.x = app.screen.width / 2;
                botton.y = app.screen.height / 3;
				botton.scale.y = 0.5;
				botton.scale.x = 0.5;
                botton.anchor.set(0.5,0.5);

				app.stage.addChild(tienda_dentro);
				app.stage.addChild(botton);

				botton.interactive = true;
				botton.mode = true;

				botton
				   .on("mouseover",mouseOver)
				   .on("mouseout",mouseOut)
				   .on("click",Click);


				PIXI.loader
				 .add("assets/walking.json")
				 .load(onLoad);

				 function onLoad(){
						var frames = [];
						for(var i=1;i<=12;i++){
						var val = i;
						frames.push(PIXI.Texture.fromFrame("walking_1_"+val+".png"));
						}

						var anim=[];
						for(var i=0;i<2;i++){
						anim[i] = new PIXI.extras.AnimatedSprite(frames);

						anim[i].x = (app.screen.width /3)+(i*500);
						anim[i].y = app.screen.height /1.5;
						anim[i].anchor.set(0.5);
						anim[i].animationSpeed = 0.2;
						anim[i].play();

						app.stage.addChild(anim[i]);
					  }

						app.ticker.add(function(delta) {
							for(var i=0;i<2;i++){
							   anim[i].x += 1 * delta;

							   if(anim[i].x>1550){
							   anim[i].x=250;
							   }
						 	}
			});

					}

					function mouseOver(){
					this.Over = true;
					if(this.isdown){
					return;
					}
					this.texture = textureButton2;
					}

					function mouseOut(){
					this.Over = false;
					if(this.isdown){
					return;
					}
					this.texture = textureButton;

					}

					function Click(){

					}

	}
	</script>
	<script src="Script/Scratcher.js"></script>
		<footer>
			<div id="container" style="background-color: rgb(25,41,26);height: 100%;width: 100%;text-align: center;">
				<div class="circulos" data-balloon="Inicio!" data-balloon-pos="up"></div>
				<div class="circulos" data-balloon="Historia!" data-balloon-pos="up"></div>
				<div class="circulos" data-balloon="Indicadores del ERC!" data-balloon-pos="up"></div>
				<div class="circulos" data-balloon="Segmentación de Cliente!" data-balloon-pos="up"></div>
				<div class="circulos" data-balloon="Simulación!" data-balloon-pos="up"></div>
				<div class="circulos" data-balloon="Escenario!" data-balloon-pos="up"></div>
				<div class="circulos" data-balloon="Créditos!" data-balloon-pos="up"></div>

		</footer>

	</body>
</html>
